{% extends "layout.html" %}
{% block title %}My Orders{% endblock %}

{% block content %}
<div class="bg-white p-8 md:p-12 rounded-xl shadow-lg max-w-4xl mx-auto">
    <h1 class="text-4xl font-extrabold text-gray-800 mb-8 text-center">My Order History</h1>

    {% if orders %}
        <div class="space-y-8">
            {% for order in orders %}
                <div class="border border-gray-200 rounded-lg p-6">
                    <div class="flex justify-between items-center mb-4 pb-4 border-b">
                        <div>
                            <p class="font-bold text-lg text-gray-800">Order #{{ order.id }}</p>
                            <p class="text-sm text-gray-500">Placed on: {{ order.order_date.strftime('%d %B %Y') }}</p>
                        </div>
                        <p class="font-bold text-xl text-gray-900">Total: ₹{{ "%.2f"|format(order.total_price) }}</p>
                    </div>
                    
                    <!-- Address Section -->
                    <div class="mb-4">
                        <h4 class="font-semibold text-md text-gray-700">Shipping Address:</h4>
                        <p class="text-gray-600">{{ order.shipping_address }}, {{ order.city }}</p>
                    </div>

                    <div class="space-y-4">
                        <h4 class="font-semibold text-md text-gray-700">Items in this order:</h4>
                        {% for item in order.items %}
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <img src="{{ url_for('static', filename='images/' + item.product.image_file) }}" alt="{{ item.product.name }}" class="w-16 h-16 object-contain rounded-md mr-4">
                                    <div>
                                        <p class="font-semibold text-gray-800">{{ item.product.name }}</p>
                                        <p class="text-sm text-gray-500">Quantity: {{ item.quantity }}</p>
                                    </div>
                                </div>
                                <p class="text-md font-semibold text-gray-700">₹{{ "%.2f"|format(item.price * item.quantity) }}</p>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="text-center py-10">
            <h2 class="text-2xl font-bold text-gray-700">You have no orders yet.</h2>
            <p class="text-gray-500 mt-2">Start shopping to see your orders here!</p>
            <a href="{{ url_for('home') }}" class="inline-block mt-6 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg transition-colors">
                Start Shopping
            </a>
        </div>
    {% endif %}
</div>
{% endblock %}
